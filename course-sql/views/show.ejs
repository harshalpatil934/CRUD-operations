<% layout("layouts/boilerplate") %>

<main class="course-show">
  <div class="course-banner">
    <img src="<%= course.image %>" alt="<%= course.name %>">
  </div>

  <div class="course-details">
    <h1><%= course.name %></h1>
    <p class="course-tutor">Instructor: <strong><%= course.tutor %></strong></p>
    <p class="course-description"><%= course.description %></p>
    <p class="course-price">Price: ₹<%= course.price %></p>

    <a href="/courses/<%= course.id%>/edit" class="btn-enroll">edit</a>
    <form action="/courses/<%= course.id %>?_method=DELETE" method="POST" class="form-delete">
    <button type="submit" class="btn-delete">Delete Course</button>
    </form>
  </div>
  <div>
    <h3>Add a Review</h3>
<section class="review-form-section">
  <h3 class="form-title">Write a Review</h3>
  <form action="/courses/<%= course.id %>/reviews" method="POST" class="review-form">
    <label for="reviewer_name">Your Name</label>
    <input type="text" name="reviewer_name" id="reviewer_name" required>

    <label for="rating">Rating</label>
    <select name="rating" id="rating" required>
      <option value="">-- Select --</option>
      <option value="5">5 - Excellent</option>
      <option value="4">4 - Good</option>
      <option value="3">3 - Average</option>
      <option value="2">2 - Poor</option>
      <option value="1">1 - Terrible</option>
    </select>

    <label for="comment">Your Review</label>
    <textarea name="comment" id="comment" rows="4" required></textarea>

    <button type="submit">Submit Review</button>
  </form>
</section>

    <section class="reviews-section">
  <h2 class="section-title">Student Reviews</h2>
    <% for (review of reviews) { %>
      <div class="review-card">
      <div class="review-header">
        <h4><%= review.reviewer_name %></h4>
        <span class="review-rating">⭐ <%= review.rating %>/5</span>
      </div>
      <p class="review-comment"><%= review.comment %></p>
      <small class="review-date"><%= new Date(review.created_at).toLocaleDateString() %></small>

      <form method="POST" action="/courses/<%= course.id %>/reviews/<%= review.id %>?_method=DELETE" class="delete-review-form">
        <button type="submit" class="btn-delete" onclick="return confirm('Are you sure you want to delete this review?')">Delete</button>
      </form>
    </div>
<% } %>
  </div>
</main>


